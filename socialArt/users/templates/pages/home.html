{% extends "base.html" %}

{% block title %} SocialArt {% endblock %}

{% block header %}
<header class="border-b-8 border-indigo-700 bg-white w-full h-14 fixed top-0 z-50">
    <nav class="flex items-center justify-between h-full">
        <h2 class="ml-5 uppercase text-2xl font-black">{{ user.username }}</h2>
        <a class="mr-5 border-b-2 border-black transition-all ease-in delay-[10ms] hover:border-amber-600 hover:text-amber-600"
            href="{% url 'logout' %}">Logout</a>
    </nav>
</header>
{% endblock %}

{% block content %}
<main class="w-full flex bg-neutral-200 mt-14 ">

    <section class="w-3/4 mt-3">

        <header class="flex flex-col items-center relative mb-4 z-0">

            <button class="bg-white text-xl absolute pb-1 w-8 left-[6%] top-[17%] z-10 box-content"
                id="leftHistory">&lt</button>

            <section class="overflow-x-hidden flex items-center w-10/12 mx-5 gap-2 absolute z-0" id="historySlider">
                <div class="w-36 shrink-0 h-48 flex">
                    <img src="https://www.swissinfo.ch/resource/image/44723544/landscape_ratio3x2/640/426/a86b5f369a9802206f77923ca5c19c94/F6CF3F86D3DAE45ECE23F135347ED9FF/teaser_angleterre_joy_the-bayswater-omnibus_hd-web.jpg"
                        loading="lazy" alt="" class="object-cover object-center">
                </div>
                <div class="w-36 shrink-0 h-48 flex">
                    <img src="https://www.swissinfo.ch/resource/image/44723544/landscape_ratio3x2/640/426/a86b5f369a9802206f77923ca5c19c94/F6CF3F86D3DAE45ECE23F135347ED9FF/teaser_angleterre_joy_the-bayswater-omnibus_hd-web.jpg"
                        loading="lazy" alt="" class="object-cover object-center">
                </div>
                <div class="w-36 shrink-0 h-48 flex">
                    <img src="https://www.swissinfo.ch/resource/image/44723544/landscape_ratio3x2/640/426/a86b5f369a9802206f77923ca5c19c94/F6CF3F86D3DAE45ECE23F135347ED9FF/teaser_angleterre_joy_the-bayswater-omnibus_hd-web.jpg"
                        loading="lazy" alt="" class="object-cover object-center">
                </div>
                <div class="w-36 shrink-0 h-48 flex">
                    <img src="https://www.swissinfo.ch/resource/image/44723544/landscape_ratio3x2/640/426/a86b5f369a9802206f77923ca5c19c94/F6CF3F86D3DAE45ECE23F135347ED9FF/teaser_angleterre_joy_the-bayswater-omnibus_hd-web.jpg"
                        loading="lazy" alt="" class="object-cover object-center">
                </div>
                <div class="w-36 shrink-0 h-48 flex">
                    <img src="https://www.swissinfo.ch/resource/image/44723544/landscape_ratio3x2/640/426/a86b5f369a9802206f77923ca5c19c94/F6CF3F86D3DAE45ECE23F135347ED9FF/teaser_angleterre_joy_the-bayswater-omnibus_hd-web.jpg"
                        loading="lazy" alt="" class="object-cover object-center">
                </div>
                <div class="w-36 shrink-0 h-48 flex">
                    <img src="https://www.swissinfo.ch/resource/image/44723544/landscape_ratio3x2/640/426/a86b5f369a9802206f77923ca5c19c94/F6CF3F86D3DAE45ECE23F135347ED9FF/teaser_angleterre_joy_the-bayswater-omnibus_hd-web.jpg"
                        loading="lazy" alt="" class="object-cover object-center">
                </div>
            </section>

            <button class="bg-white text-xl absolute pb-1 w-8 text-center right-[6%] top-[17%] z-10"
                id="rightHistory">&gt</button>

            <section class="mt-52 flex flex-col items-center justify-center w-2/3 bg-white text-black font-medium p-4">
                <form class="flex flex-col w-9/12" method="post">
                    {{ context.form.as_p }}
                    {% csrf_token %}
                    <button type="submit"
                        class="w-1/2 mt-3 self-center bg-indigo-600 text-slate-200 px-3 py-2 font-bold transition-all ease-in delay-[10ms] hover:bg-indigo-700">
                        Subir
                    </button>
                </form>
            </section>

        </header>

        <main class="flex flex-col items-center">

            <section class="w-2/3 flex bg-white flex-col items-center">
                <header class="flex flex-col px-3 pb-2 p-1">
                    <div class="flex items-center justify-between px-2">
                        <h3 class="text-xl font-medium capitalize">{{ user.username }}</h3>
                        <span class="text-xs">fecha</span>
                    </div>
                    <p class="break-words text-sm px-2 pt-2">Lorem ipsum dolor sit amet consectetur
                        adipisicing
                        elit. Perferendis, aliquam? Harum quaerat commodi dolore illo, optio voluptates! Soluta
                        beatae error labore harum quos voluptates a ipsa quia, dolor quam saepe?</p>
                </header>
                <main>
                    <div class="flex">
                        <img src="
                        https://www.swissinfo.ch/resource/image/44723544/landscape_ratio3x2/640/426/a86b5f369a9802206f77923ca5c19c94/F6CF3F86D3DAE45ECE23F135347ED9FF/teaser_angleterre_joy_the-bayswater-omnibus_hd-web.jpg"
                            loading="lazy" alt="" class="object-cover object-center">
                    </div>
                </main>
                <footer class="w-full px-5 py-2 flex flex-col">
                    <div class="border-b-2 border-amber-600 pb-2">
                        <span>likes: 123</span>
                    </div>
                    <div class="flex gap-2 mt-1">
                        <button class="w-1/2 py-1 transition-all ease-in delay-[10ms] hover:bg-zinc-200">Like</button>
                        <button
                            class="w-1/2 py-1 transition-all ease-in delay-[10ms] hover:bg-zinc-200">Comment</button>
                    </div>
                </footer>
            </section>

            <br>

            {% for post in context.posts %}
            <section class="w-2/3 flex bg-white flex-col items-center">
                <header class="flex flex-col px-3 pb-2 p-1 w-full">
                    <div class="flex items-center justify-between px-2">
                        <h3 class="text-xl font-medium capitalize">{{ post.user }}</h3>
                        <span class="text-xs">{{ post.created_at }}</span>
                    </div>
                    <p class="break-words text-sm px-2 pt-2">{{ post.content }}</p>
                </header>
                <main>
                    {% if post.url_image %}
                    <div class="flex max-w-[640px]">
                        <img src="{{ post.url_image }}" loading="lazy" alt="ima" class="object-cover object-center">
                    </div>
                    {% endif %}
                </main>
                <footer class="w-full px-5 py-2 flex flex-col">
                    <div class="border-b-2 border-amber-600 pb-2">
                        <span>❤ 123</span>
                    </div>
                    <div class="flex gap-2 mt-1">
                        <button class="w-1/2 py-1 transition-all ease-in delay-[10ms] hover:bg-zinc-200">Like</button>
                        <button
                            class="w-1/2 py-1 transition-all ease-in delay-[10ms] hover:bg-zinc-200">Comment</button>
                    </div>
                </footer>
            </section>
            <br>
            {% empty %}
            <h3>Sigue a más gente para más publicaciones en tu feed</h3>
            {% endfor %}

        </main>

        <br>
    </section>

    <section class="w-1/4 fixed boder-2 border-amber-600 overflow-y-auto right-0 top-12 bottom-0">
        <h5 class="capitalize text-xl font-black mt-3">Contactos</h5>
        <main class="flex flex-col overflow-y-auto">
            <div class="h-10 flex items-center">
                nombre de amigues
            </div>
            <div class="h-10 flex items-center">
                nombre de amigues
            </div>
            <div class="h-10 flex items-center">
                nombre de amigues
            </div>
            <div class="h-10 flex items-center">
                nombre de amigues
            </div>
            <div class="h-10 flex items-center">
                nombre de amigues
            </div>
            <div class="h-10 flex items-center">
                nombre de amigues
            </div>
            <div class="h-10 flex items-center">
                nombre de amigues
            </div>
            <div class="h-10 flex items-center">
                nombre de amigues
            </div>
            <div class="h-10 flex items-center">
                nombre de amigues
            </div>
            <div class="h-10 flex items-center">
                nombre de amigues
            </div>
            <div class="h-10 flex items-center">
                nombre de amigues
            </div>
            <div class="h-10 flex items-center">
                nombre de amigues
            </div>
            <div class="h-10 flex items-center">
                nombre de amigues
            </div>
            <div class="h-10 flex items-center">
                nombre de amigues
            </div>
            <div class="h-10 flex items-center">
                nombre de amigues
            </div>
        </main>
    </section>

</main>
{% endblock %}


{% block script %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        function autoResize() {
            this.style.height = "0px";
            this.style.height = this.scrollHeight + 'px';
        }

        const textarea = document.querySelector("#id_content");
        textarea.addEventListener('input', autoResize, false);

        const leftHistory = document.querySelector('#leftHistory')
        const rightHistory = document.querySelector('#rightHistory')

        const historySlider = document.querySelector('#historySlider')

        if (historySlider.scrollLeft == 0) {
            leftHistory.classList.add('opacity-0')
        }

        const handleMoveLeft = (e) => {
            historySlider.scrollLeft -= 150;
            if (historySlider.scrollLeft == 0) {
                leftHistory.classList.add('opacity-0')
            } else {
                leftHistory.classList.add('opacity-1')

            }
        }

        const handleMoveRight = (e) => {
            historySlider.scrollLeft += 150;
            if (historySlider.scrollLeft == historySlider.scrollWidth - historySlider.clientWidth) console.log('max')
            if (historySlider.scrollLeft !== 0) {
                leftHistory.classList.add('opacity-1')
            }
        }

        leftHistory.addEventListener('click', e => handleMoveLeft(e))
        rightHistory.addEventListener('click', () => handleMoveRight());
    })
</script>
{% endblock %}